<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GEAR STORE | Ultimate Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { background-color: #08080c; color: #fff; font-family: 'Plus Jakarta Sans', sans-serif; }
        .glass-card { background: #11111a; border: 1px solid #1f1f2e; border-radius: 1.25rem; transition: all 0.3s ease; }
        .neon-border { border: 2px solid rgba(34, 197, 94, 0.5); }
        .category-btn.active { background: #5865f2; box-shadow: 0 0 20px rgba(88, 101, 242, 0.4); color: white; border-color: #5865f2; }
        .btn-buy { background: linear-gradient(90deg, #6366f1, #a855f7); }
    </style>
</head>
<body>

    <nav class="bg-[#0d0d12]/80 backdrop-blur-md sticky top-0 z-50 p-4 border-b border-white/5">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2 cursor-pointer select-none" onclick="secretAdminAccess()">
                <span class="text-2xl font-black text-indigo-500">GEAR</span><span class="text-2xl font-black">STORE</span>
            </div>
            <div class="flex items-center gap-6">
                <button onclick="showPage('shop')" class="text-sm font-bold text-gray-400 hover:text-white">Products</button>
                <div class="relative cursor-pointer" onclick="toggleCart()">
                    <span>üõí</span>
                    <span id="cart-count" class="absolute -top-2 -right-2 bg-indigo-600 text-[10px] w-5 h-5 rounded-full flex items-center justify-center font-bold">0</span>
                </div>
            </div>
        </div>
    </nav>

    <main id="shop-page" class="max-w-7xl mx-auto px-6 py-10">
        <div class="text-center mb-16">
            <h1 class="text-5xl font-black mb-4">Gaming Marketplace</h1>
            <p class="text-gray-500">Premium accounts with instant delivery.</p>
        </div>

        <div class="flex justify-center gap-4 mb-10">
            <button onclick="filterCategory('All')" class="category-btn active px-6 py-2 rounded-xl text-sm font-bold border border-white/10 bg-[#1c1c27]">üåê All</button>
            <button onclick="filterCategory('FiveM')" class="category-btn px-6 py-2 rounded-xl text-sm font-bold border border-white/10 bg-[#1c1c27] text-gray-400">üéÆ FiveM</button>
            <button onclick="filterCategory('Cloud Phone')" class="category-btn px-6 py-2 rounded-xl text-sm font-bold border border-white/10 bg-[#1c1c27] text-gray-400">üì± Cloud Phone</button>
        </div>

        <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </main>

    <main id="admin-page" class="hidden max-w-6xl mx-auto p-10">
        <div class="flex justify-between items-center mb-10">
            <h2 class="text-3xl font-black text-indigo-400">Admin Control Center</h2>
            <button onclick="showPage('shop')" class="bg-red-500/10 text-red-500 px-4 py-2 rounded-lg font-bold">Logout</button>
        </div>

        <div class="grid grid-cols-3 gap-6 mb-10 text-center">
            <div class="bg-[#11111a] p-6 rounded-3xl border border-white/5">
                <p class="text-gray-500 text-xs font-bold uppercase mb-2">Revenue</p>
                <h3 class="text-2xl font-black text-green-400">Rp <span id="val-rev">0</span></h3>
            </div>
            <div class="bg-[#11111a] p-6 rounded-3xl border border-white/5">
                <p class="text-gray-500 text-xs font-bold uppercase mb-2">Total Sold</p>
                <h3 class="text-2xl font-black text-blue-400" id="val-ord">0</h3>
            </div>
            <div class="bg-[#11111a] p-6 rounded-3xl border border-white/5">
                <p class="text-gray-500 text-xs font-bold uppercase mb-2">Catalog</p>
                <h3 class="text-2xl font-black text-purple-400" id="val-cat">0</h3>
            </div>
        </div>

        <div class="glass-card p-8 mb-10">
            <h3 id="form-title" class="font-bold text-xl mb-6">Tambah Produk Baru</h3>
            <input type="hidden" id="edit-id">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="text" id="p-name" placeholder="Nama Produk" class="bg-black border border-white/10 p-3 rounded-xl outline-none">
                <select id="p-cat" class="bg-black border border-white/10 p-3 rounded-xl outline-none">
                    <option value="FiveM">FiveM</option>
                    <option value="Cloud Phone">Cloud Phone</option>
                </select>
                <input type="number" id="p-price" placeholder="Harga Asli" class="bg-black border border-white/10 p-3 rounded-xl outline-none">
                <input type="number" id="p-discount" placeholder="Diskon (%)" class="bg-black border border-white/10 p-3 rounded-xl outline-none">
                <input type="number" id="p-reseller" placeholder="Harga Reseller" class="bg-black border border-white/10 p-3 rounded-xl outline-none">
                <input type="number" id="p-stock" placeholder="Jumlah Stok" class="bg-black border border-white/10 p-3 rounded-xl outline-none">
                <input type="text" id="p-img" placeholder="URL Gambar" class="md:col-span-2 bg-black border border-white/10 p-3 rounded-xl outline-none">
                <button id="btn-save" onclick="handleSaveProduct()" class="md:col-span-2 btn-buy py-4 rounded-xl font-black">SIMPAN PERUBAHAN</button>
                <button id="btn-cancel" onclick="clearForm()" class="hidden md:col-span-2 text-gray-500 text-sm underline">Batalkan Edit</button>
            </div>
        </div>

        <div class="glass-card overflow-hidden">
            <table class="w-full text-left text-sm">
                <thead class="bg-white/5">
                    <tr>
                        <th class="p-4">Produk</th>
                        <th class="p-4">Kategori</th>
                        <th class="p-4">Harga (Final)</th>
                        <th class="p-4">Stok</th>
                        <th class="p-4 text-center">Aksi</th>
                    </tr>
                </thead>
                <tbody id="admin-table-body"></tbody>
            </table>
        </div>
    </main>

    <div id="cart-modal" class="fixed inset-0 bg-black/80 hidden z-[60] flex justify-end">
        <div class="bg-[#0d0d12] w-full max-w-md h-full p-8 border-l border-white/10">
            <h2 class="text-2xl font-black mb-10">Keranjang</h2>
            <div id="cart-items" class="space-y-4 mb-10"></div>
            <div class="border-t border-white/10 pt-6">
                <div class="flex justify-between text-xl font-bold mb-6"><span>Total:</span><span class="text-indigo-500">Rp <span id="cart-total">0</span></span></div>
                <button onclick="alert('QRIS Muncul!')" class="btn-buy w-full py-4 rounded-2xl font-black">BAYAR SEKARANG</button>
                <button onclick="toggleCart()" class="w-full mt-4 text-gray-500">Tutup</button>
            </div>
        </div>
    </div>

    <script>
        let products = JSON.parse(localStorage.getItem('gear_v3_data')) || [
            { id: 1, name: "LAH STEAM FRESH", cat: "FiveM", price: 1500, discount: 0, reseller: 900, stock: 44, sold: 255, img: "https://via.placeholder.com/300/101015/00FF00" }
        ];
        let revenue = Number(localStorage.getItem('gear_v3_rev')) || 0;
        let orders = Number(localStorage.getItem('gear_v3_ord')) || 0;
        let cart = [];
        let clickCount = 0;
        const ADMIN_PASS = "admin123"; // GANTI PASSWORD DI SINI

        function secretAdminAccess() {
            clickCount++;
            if(clickCount >= 3) {
                const pass = prompt("Masukkan Password Admin:");
                if(pass === ADMIN_PASS) {
                    showPage('admin');
                } else {
                    alert("Password Salah!");
                }
                clickCount = 0;
            }
            setTimeout(() => clickCount = 0, 2000);
        }

        function showPage(page) {
            document.getElementById('shop-page').classList.toggle('hidden', page !== 'shop');
            document.getElementById('admin-page').classList.toggle('hidden', page !== 'admin');
            if(page === 'admin') renderAdmin();
            if(page === 'shop') renderShop();
        }

        function renderShop(data = products) {
            const list = document.getElementById('product-list');
            list.innerHTML = '';
            data.forEach(p => {
                const finalPrice = p.price - (p.price * (p.discount / 100));
                const isOut = p.stock <= 0;
                list.innerHTML += `
                    <div class="glass-card p-4 flex flex-col">
                        <div class="relative mb-5 rounded-xl overflow-hidden ${!isOut ? 'neon-border' : ''}">
                            <img src="${p.img}" class="w-full h-44 object-cover">
                            ${p.discount > 0 ? `<div class="absolute top-2 left-2 bg-red-600 text-[10px] font-black px-2 py-1 rounded">SAVE ${p.discount}%</div>` : ''}
                        </div>
                        <h3 class="font-bold text-sm mb-1">${p.name}</h3>
                        <p class="text-[10px] text-indigo-400 mb-3 italic">Category: ${p.cat}</p>
                        <div class="mb-4">
                            <p class="text-xl font-black text-blue-400">Rp ${finalPrice.toLocaleString()}</p>
                            ${p.discount > 0 ? `<p class="text-[10px] text-gray-500 line-through">Rp ${p.price.toLocaleString()}</p>` : ''}
                        </div>
                        <button onclick="addToCart(${p.id})" ${isOut ? 'disabled' : ''} class="w-full ${isOut ? 'bg-gray-800 text-gray-500' : 'btn-buy'} py-3 rounded-xl font-bold text-xs">
                            ${isOut ? 'OUT OF STOCK' : 'üõí BUY NOW'}
                        </button>
                    </div>`;
            });
        }

        function handleSaveProduct() {
            const id = document.getElementById('edit-id').value;
            const productData = {
                id: id ? Number(id) : Date.now(),
                name: document.getElementById('p-name').value,
                cat: document.getElementById('p-cat').value,
                price: Number(document.getElementById('p-price').value),
                discount: Number(document.getElementById('p-discount').value) || 0,
                reseller: Number(document.getElementById('p-reseller').value),
                stock: Number(document.getElementById('p-stock').value),
                img: document.getElementById('p-img').value || "https://via.placeholder.com/300",
                sold: id ? products.find(p => p.id == id).sold : 0
            };

            if(id) {
                const index = products.findIndex(p => p.id == id);
                products[index] = productData;
            } else {
                products.push(productData);
            }

            saveData();
            clearForm();
            renderAdmin();
            alert("Data Berhasil Disimpan!");
        }

        function editProduct(id) {
            const p = products.find(prod => prod.id == id);
            document.getElementById('edit-id').value = p.id;
            document.getElementById('p-name').value = p.name;
            document.getElementById('p-cat').value = p.cat;
            document.getElementById('p-price').value = p.price;
            document.getElementById('p-discount').value = p.discount;
            document.getElementById('p-reseller').value = p.reseller;
            document.getElementById('p-stock').value = p.stock;
            document.getElementById('p-img').value = p.img;
            
            document.getElementById('form-title').innerText = "Edit Produk: " + p.name;
            document.getElementById('btn-save').innerText = "UPDATE PRODUK";
            document.getElementById('btn-cancel').classList.remove('hidden');
        }

        function deleteProduct(id) {
            if(confirm("Hapus produk ini?")) {
                products = products.filter(p => p.id != id);
                saveData();
                renderAdmin();
            }
        }

        function clearForm() {
            document.getElementById('edit-id').value = "";
            document.getElementById('p-name').value = "";
            document.getElementById('p-price').value = "";
            document.getElementById('p-discount').value = "";
            document.getElementById('p-reseller').value = "";
            document.getElementById('p-stock').value = "";
            document.getElementById('p-img').value = "";
            document.getElementById('form-title').innerText = "Tambah Produk Baru";
            document.getElementById('btn-save').innerText = "PUBLISH PRODUK";
            document.getElementById('btn-cancel').classList.add('hidden');
        }

        function renderAdmin() {
            document.getElementById('val-rev').innerText = revenue.toLocaleString();
            document.getElementById('val-ord').innerText = orders;
            document.getElementById('val-cat').innerText = products.length;

            const tbody = document.getElementById('admin-table-body');
            tbody.innerHTML = '';
            products.forEach(p => {
                const final = p.price - (p.price * (p.discount / 100));
                tbody.innerHTML += `
                    <tr class="border-b border-white/5 hover:bg-white/5 transition">
                        <td class="p-4 flex items-center gap-3">
                            <img src="${p.img}" class="w-8 h-8 rounded object-cover">
                            <span>${p.name}</span>
                        </td>
                        <td class="p-4 text-gray-400">${p.cat}</td>
                        <td class="p-4 font-bold text-indigo-400">Rp ${final.toLocaleString()}</td>
                        <td class="p-4">${p.stock}</td>
                        <td class="p-4 text-center space-x-2">
                            <button onclick="editProduct(${p.id})" class="text-blue-500 font-bold">Edit</button>
                            <button onclick="deleteProduct(${p.id})" class="text-red-500 font-bold">Hapus</button>
                        </td>
                    </tr>
                `;
            });
        }

        function filterCategory(cat) {
            document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
            event.currentTarget.classList.add('active');
            renderShop(cat === 'All' ? products : products.filter(p => p.cat === cat));
        }

        function saveData() { localStorage.setItem('gear_v3_data', JSON.stringify(products)); }
        function toggleCart() { document.getElementById('cart-modal').classList.toggle('hidden'); }
        function addToCart(id) { cart.push(products.find(p => p.id === id)); updateCartCount(); }
        function updateCartCount() { document.getElementById('cart-count').innerText = cart.length; }

        renderShop();
    </script>
</body>
</html>
