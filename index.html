<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>W4RAS STORE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #080808; color: white; scroll-behavior: smooth; }
        .glass { background: rgba(18,18,18,0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.05); }
        .btn-green { background: #22c55e; color: black; font-weight: 800; border-radius: 12px; transition: 0.3s; }
        .btn-green:hover { transform: translateY(-2px); filter: brightness(1.1); }
        .admin-input { background: #f3f4f6 !important; color: #111827 !important; font-weight: 600; width: 100%; padding: 1rem; border-radius: 0.75rem; font-size: 0.875rem; }
        .modal { display: none; position: fixed; z-index: 100; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(8px); }
        .modal-content { background: #0f0f0f; margin: 2rem auto; padding: 2rem; border: 1px solid rgba(255,255,255,0.1); width: 95%; max-width: 500px; border-radius: 24px; }
    </style>
</head>
<body class="pb-20">
    <nav class="fixed top-0 w-full z-50 glass px-6 py-4 flex justify-between items-center">
        <div class="text-xl font-black italic select-none">W4RAS<span onclick="secretAdmin()" class="text-green-500 cursor-pointer">STORE</span></div>
        <button onclick="toggleModal('cartModal', true)" class="relative p-3 bg-white/5 rounded-xl"><i class="fa-solid fa-cart-shopping"></i><span id="cart-count" class="absolute -top-1 -right-1 bg-red-500 text-[10px] w-5 h-5 flex items-center justify-center rounded-full">0</span></button>
    </nav>

    <header class="pt-32 pb-10 text-center uppercase">
        <h1 class="text-5xl md:text-7xl font-black italic italic tracking-tighter">W4RAS <span class="text-green-500">GEAR</span></h1>
        <p class="text-slate-500 text-[10px] font-bold tracking-[0.3em]">High Performance Virtual Assets</p>
    </header>

    <div class="max-w-6xl mx-auto px-6 mb-10 space-y-8">
        <div id="category-bar" class="flex flex-wrap justify-center gap-2"></div>
        <div class="glass rounded-2xl flex items-center px-5 py-4 max-w-xl mx-auto">
            <i class="fa-solid fa-magnifying-glass text-slate-500 mr-3"></i>
            <input type="text" id="search" onkeyup="render()" placeholder="Cari produk..." class="bg-transparent w-full outline-none text-sm">
        </div>
        <div id="grid" class="grid grid-cols-2 md:grid-cols-4 gap-6"></div>
    </div>

    <div id="cartModal" class="modal"><div class="modal-content">
        <h2 class="text-xl font-black mb-6 text-green-500 italic uppercase">Your Cart</h2>
        <div id="cart-items" class="space-y-2 mb-6"></div>
        <div class="flex justify-between font-black text-lg mb-6 border-t border-white/10 pt-4"><span>Total:</span><span id="cart-total" class="text-green-500">Rp 0</span></div>
        <button onclick="checkout()" class="w-full btn-green py-4 uppercase mb-2">Checkout (QRIS)</button>
        <button onclick="toggleModal('cartModal', false)" class="w-full text-slate-500 text-[10px] font-bold">LANJUT BELANJA</button>
    </div></div>

    <div id="qrisModal" class="modal"><div class="modal-content text-center">
        <div id="pay-step">
            <h2 class="text-xl font-black mb-4 text-green-500 uppercase">Scan QRIS</h2>
            <img id="qris-img" src="" class="bg-white p-4 rounded-2xl mx-auto mb-6 w-64 h-64">
            <button onclick="confirmPay()" class="w-full btn-green py-4">SAYA SUDAH BAYAR</button>
        </div>
        <div id="success-step" class="hidden">
            <i class="fa-solid fa-circle-check text-5xl text-green-500 mb-4"></i>
            <h2 class="text-2xl font-black text-green-500 uppercase">Pesanan Berhasil!</h2>
            <p class="text-slate-400 text-xs my-4">Kirim screenshot & bukti bayar ke WhatsApp Admin.</p>
            <div class="bg-white/5 p-4 rounded-xl border border-green-500/30 mb-6">
                <p id="order-id" class="text-2xl font-black italic tracking-widest"></p>
            </div>
            <button onclick="location.reload()" class="w-full btn-green py-4">KEMBALI</button>
        </div>
    </div></div>

    <section id="admin-panel" class="hidden max-w-6xl mx-auto px-6 mt-20 pt-10 border-t border-white/10">
        <div class="grid lg:grid-cols-2 gap-10">
            <div class="space-y-6">
                <div class="bg-white/5 p-6 rounded-3xl border border-white/5">
                    <div class="flex justify-between mb-4 text-sm font-black italic text-green-500 uppercase"><span>Finance</span><button onclick="resetStats()" class="text-red-500 text-[9px] border border-red-500/30 px-2 rounded">RESET</button></div>
                    <div class="grid grid-cols-2 gap-4 text-center">
                        <div class="bg-black/40 p-4 rounded-xl"><p class="text-[9px] text-slate-500">REVENUE</p><p id="rev" class="font-black">Rp 0</p></div>
                        <div class="bg-black/40 p-4 rounded-xl"><p class="text-[9px] text-slate-500">ORDERS</p><p id="ord" class="font-black">0</p></div>
                    </div>
                </div>
                <div class="bg-blue-600/5 p-6 rounded-3xl border border-blue-500/20">
                    <input type="text" id="webhook" placeholder="Discord Webhook URL" class="admin-input mb-2"><button onclick="saveWebhook()" class="w-full bg-blue-600 py-2 rounded-xl text-[10px] font-black uppercase">Save Webhook</button>
                </div>
            </div>
            <div class="bg-white/5 p-6 rounded-3xl border border-white/5 space-y-3">
                <input id="p-name" placeholder="Nama Produk" class="admin-input">
                <input id="p-price" type="number" placeholder="Harga" class="admin-input">
                <input id="p-img" placeholder="URL Gambar" class="admin-input">
                <div class="flex gap-2"><select id="p-cat" class="admin-input flex-1"></select><input id="p-new" placeholder="Kategori Baru" class="admin-input flex-1"></div>
                <button onclick="addProd()" class="w-full btn-green py-3 uppercase text-xs">Simpan Produk</button>
            </div>
        </div>
        <div id="admin-list" class="mt-8 grid md:grid-cols-3 gap-4"></div>
    </section>

    <script>
        const PASS = "Wira123";
        let db = JSON.parse(localStorage.getItem('w4ras_db')) || [], cats = JSON.parse(localStorage.getItem('w4ras_cats')) || ['FiveM','Cloud Phone','PREMIUM'], 
            stats = JSON.parse(localStorage.getItem('w4ras_stats')) || {revenue:0, orders:0}, hook = localStorage.getItem('w4ras_webhook') || "", 
            cart = [], curCat = 'All', clicks = 0, lastClick = 0;

        function secretAdmin() {
            const now = Date.now();
            clicks = (now - lastClick < 500) ? clicks + 1 : 1; lastClick = now;
            if (clicks === 3 && prompt("Pass:") === PASS) { document.getElementById('admin-panel').classList.toggle('hidden'); render(); }
        }

        function render() {
            const s = document.getElementById('search').value.toLowerCase();
            document.getElementById('rev').innerText = 'Rp ' + stats.revenue.toLocaleString();
            document.getElementById('ord').innerText = stats.orders;
            document.getElementById('p-cat').innerHTML = cats.map(c => `<option>${c}</option>`).join('');
            document.getElementById('category-bar').innerHTML = ['All', ...cats].map(c => `<button onclick="curCat='${c}';render()" class="px-5 py-2 rounded-full text-[10px] font-black uppercase border border-white/10 ${curCat===c?'bg-blue-600':'bg-white/5 text-slate-500'} transition">${c}</button>`).join('');
            
            let h = '', ah = '';
            db.forEach(p => {
                if((curCat === 'All' || p.cat === curCat) && p.name.toLowerCase().includes(s))
                    h += `<div class="glass rounded-3xl overflow-hidden border border-white/5 p-4 text-center"><img src="${p.img}" class="h-32 w-full object-cover rounded-2xl mb-4"><p class="text-[7px] text-slate-500 font-black uppercase">${p.cat}</p><h4 class="font-bold text-xs mb-2">${p.name}</h4><p class="text-green-500 font-black mb-4">Rp ${p.price.toLocaleString()}</p><button onclick="addCart(${p.id})" class="w-full py-2 btn-green text-[9px] uppercase">Add</button></div>`;
                ah += `<div class="bg-black/40 p-3 rounded-xl border border-white/5 flex justify-between text-[10px] font-black uppercase text-green-500"><span>${p.name}</span><button onclick="delProd(${p.id})" class="text-red-500"><i class="fa-solid fa-trash"></i></button></div>`;
            });
            document.getElementById('grid').innerHTML = h; document.getElementById('admin-list').innerHTML = ah;
        }

        function addCart(id) { cart.push(db.find(p => p.id === id)); document.getElementById('cart-count').innerText = cart.length; }
        function toggleModal(id, show) { document.getElementById(id).style.display = show ? 'block' : 'none'; if(id==='cartModal') renderCart(); }
        function renderCart() {
            let t = 0;
            document.getElementById('cart-items').innerHTML = cart.map(i => { t += i.price; return `<div class="flex justify-between text-xs bg-white/5 p-2 rounded-lg"><span>${i.name}</span><span class="text-green-500">Rp ${i.price.toLocaleString()}</span></div>` }).join('');
            document.getElementById('cart-total').innerText = 'Rp ' + t.toLocaleString();
        }

        function checkout() {
            let t = cart.reduce((a,b) => a + b.price, 0); if(!t) return;
            document.getElementById('qris-img').src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=W4RAS_${t}`;
            document.getElementById('pay-step').classList.remove('hidden'); document.getElementById('success-step').classList.add('hidden');
            toggleModal('qrisModal', true);
        }

        async function confirmPay() {
            const oid = `#WRS-${Date.now().toString().slice(-4)}`;
            let t = cart.reduce((a,b) => a + b.price, 0);
            if(hook) await fetch(hook, { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({embeds:[{title:"NEW SALE", color:2263894, fields:[{name:"ID",value:oid},{name:"Total",value:"Rp "+t.toLocaleString()}]}]}) });
            stats.revenue += t; stats.orders++; localStorage.setItem('w4ras_stats', JSON.stringify(stats));
            document.getElementById('order-id').innerText = oid; document.getElementById('pay-step').classList.add('hidden'); document.getElementById('success-step').classList.remove('hidden');
            cart = []; document.getElementById('cart-count').innerText = 0;
        }

        function addProd() {
            const n = document.getElementById('p-name').value, p = parseInt(document.getElementById('p-price').value), i = document.getElementById('p-img').value, nc = document.getElementById('p-new').value, sc = document.getElementById('p-cat').value;
            let c = nc || sc;
            if(n && p && i) {
                if(!cats.includes(c)) cats.push(c);
                db.push({id:Date.now(), name:n, price:p, img:i, cat:c});
                localStorage.setItem('w4ras_db', JSON.stringify(db)); localStorage.setItem('w4ras_cats', JSON.stringify(cats));
                render(); alert('Added!');
            }
        }

        function delProd(id) { if(confirm('Hapus?')) { db = db.filter(p => p.id !== id); localStorage.setItem('w4ras_db', JSON.stringify(db)); render(); } }
        function saveWebhook() { hook = document.getElementById('webhook').value; localStorage.setItem('w4ras_webhook', hook); alert('Saved!'); }
        function resetStats() { if(confirm('Reset?') && prompt('Pass:') === PASS) { stats = {revenue:0, orders:0}; localStorage.setItem('w4ras_stats', JSON.stringify(stats)); render(); } }

        render();
    </script>
</body>
</html>
